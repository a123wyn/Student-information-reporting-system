(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/list/list"],{4672:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-calendar/uni-calendar")]).then(n.bind(null,"1597"))},i=new Date,o=i.getFullYear()+"/"+(i.getMonth()+1)+"/"+(i.getDate()+1),d={data:function(){return{academy_id:"",num:-1,time:"",selectTime:!1,stat:0,lack:0,arr:[],gradeList:[],majorList:[],majorArr:[],majorIndex:"",majorName:"",gradeArr:[],gradeIndex:"",gradeName:"",selected_grade_id:"",selected_major_id:""}},components:{uniCalendar:r},onLoad:function(){var t=this;this.academy_id=e.getStorageSync("academy_id"),e.getStorageSync("token")?this.time=i.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getDate():e.navigateTo({url:"../login/login"}),a.callFunction({name:"getGradeList"}).then(function(e){console.log(e),t.gradeList=e.result,t.gradeArr=t.gradeList[t.academy_id]}).catch(function(t){e.hideLoading(),console.error(t)}),a.callFunction({name:"getMajorList"}).then(function(e){console.log(e),t.majorList=e.result}).catch(function(t){e.hideLoading(),console.error(t)})},methods:{selectgradeChange:function(e){console.log(e.target.value),this.gradeIndex=e.target.value,this.gradeName=this.gradeArr[this.gradeIndex].name,this.selected_grade_id=this.gradeArr[this.gradeIndex]._id,this.majorArr=this.majorList[this.selected_grade_id],this.majorName="",this.selected_major_id=""},selectmajorChange:function(e){console.log(e.target.value),this.majorIndex=e.target.value,this.majorName=this.majorArr[this.majorIndex].name,this.selected_major_id=this.majorArr[this.majorIndex]._id},change:function(e){console.log(e),o=e.year+"/"+e.month+"/"+(e.date+1);var t=e.year+"/"+e.month+"/"+e.date;this.time!=t&&(this.time=t),this.selectTime=!1},confirm:function(){var t=this;e.showLoading({title:"处理中..."});var n=new Date(this.time).getTime(),r=new Date(o).getTime();a.callFunction({name:"query_reports",data:{academy_id:this.academy_id,grade_id:this.selected_grade_id,major_id:this.selected_major_id,time:n,time2:r}}).then(function(n){e.hideLoading(),console.log(n),t.stat=n.result.arr.length,t.arr=n.result.arr,"未获取到该班级信息"!=n.result.student_sum?t.lack=n.result.student_sum-t.stat:e.showToast({title:n.result.student_sum,icon:"none",duration:2e3});var a=function(e){return function(t,n){var a=t[e],r=n[e];return a>r?1:a<r?-1:0}};t.arr.sort(a("stu_num"))}).catch(function(t){e.hideLoading(),console.error(t)})},clear:function(){this.gradeName="",this.majorName="",this.selected_grade_id="",this.selected_major_id=""}}};t.default=d}).call(this,n("543d")["default"],n("a9ff")["default"])},"50f0":function(e,t,n){"use strict";var a={"uni-calendar":()=>Promise.all([n.e("common/vendor"),n.e("components/uni-calendar/uni-calendar")]).then(n.bind(null,"1597"))},r=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.selectTime=!0},e.e1=function(t){e.selectTime=!1})},i=[];n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a})},"636c":function(e,t,n){},"66de":function(e,t,n){"use strict";n.r(t);var a=n("50f0"),r=n("7a17");for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);n("f1db");var o,d=n("f0c5"),c=Object(d["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);t["default"]=c.exports},"7a17":function(e,t,n){"use strict";n.r(t);var a=n("4672"),r=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);t["default"]=r.a},dcc1:function(e,t,n){"use strict";(function(e){n("a4ad"),n("921b");a(n("66fd"));var t=a(n("66de"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},f1db:function(e,t,n){"use strict";var a=n("636c"),r=n.n(a);r.a}},[["dcc1","common/runtime","common/vendor"]]]);